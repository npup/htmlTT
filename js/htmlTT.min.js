/**
*
* Name: htmlTT.js
* Version: 0.1
* Description: html tooltips
* Author: P. Envall (petter.envall@gmail.com, @npup)
* Date: 2013-08-17
*
*/var htmlTT=function(){function h(){function a(a,b){for(var c in f){var d=f[c];if(!d.currentSrcId||b&&(d.view==b||d.view.contains(b)))continue;k(d,a||0)}}g(b.body,"mouseover",function(a){if(e)return;var c=a.target||a.srcElement,g=c.getAttribute(d),h;if(!g||!(h=/^(.+)#(.+)$/.exec(g)))return;var i=h[1],k=h[2],l=f[i],m;if(!l||!k||k==l.currentSrcId)return;m=b.getElementById(k);if(!m)return;j(l,c,m,k)}),g(b.body,"mouseout",function(b){var c=b.relatedTarget;a(500,c)}),g(b,"keyup",function(b){if(27!==b.keyCode)return;e=!0,a(),setTimeout(function(){e=!1},200)}),h=null}function i(a,d){var e=this,g;if(a in f)return;e.group=a,f[a]=e,e.currentSrcId=null,e.pos={x:0,y:0},e.customView=!1;var i="string"==typeof d["class"]?d["class"]:"";d.view&&("string"==typeof d.view?g=b.getElementById(d.view):1===d.view.nodeType&&(g=d.view)),g?(g.style.visibility="hidden",e.customView=!0):(g=b.createElement("div"),g.className=c,i||(g.style.position="absolute"),g.style.display="none",b.body.appendChild(g)),e.customView||"pos"in d&&!d.pos?e.pos=!1:e.pos&&"[object Object]"=={}.toString.call(d.pos)&&("x"in d.pos&&(e.pos.x=d.pos.x),"y"in d.pos&&(e.pos.y=d.pos.y)),i&&(g.className+=" "+i),e.view=g,h&&h()}function j(a,b,c,d){a._timeout&&(a._timeout=clearTimeout(a._timeout)),a.currentSrcId=d,a.view.innerHTML=c.innerHTML,a.pos&&l(a,b),a.customView?a.view.style.visibility="visible":a.view.style.display=""}function k(a,b){a.currentSrcId=null,a._timeout=setTimeout(function(){a.customView?a.view.style.visibility="hidden":a.view.style.display="none"},b)}function l(a,b){var c=b.getBoundingClientRect(),d={top:Math.floor(c.top),left:Math.floor(c.left)},e=m();a.view.style.top=a.pos.y+e.y+d.top+"px",a.view.style.left=a.pos.x+e.x+d.left+"px"}function m(){var c=a.pageXOffset,d=a.pageYOffset,e;return void 0===c&&(c=(((e=b.documentElement)||(e=b.body.parentNode))&&typeof e.scrollLeft=="number"?e:b.body).scrollLeft),void 0===d&&(d=(((e=b.documentElement)||(e=b.body.parentNode))&&typeof e.scrollTop=="number"?e:b.body).scrollTop),{x:c,y:d}}var a=this,b=a.document,c="html-tt",d="data-htmltt",e=!1,f={},g=function(){return"function"==typeof b.body.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)}}();return{create:function(a,b){return void (new i(a,b||{}))}}}();