/**
*
* Name: htmlTT.js
* Version: 0.1
* Description: html tooltips
* Author: P. Envall (petter.envall@gmail.com, @npup)
* Date: 2013-08-17
*
*/var htmlTT=function(){function j(){function a(a,b){for(var c in h){var d=h[c];if(!d.currentSrcId||b&&(d.view==b||d.view.contains(b)))continue;m(d,a||0)}}i(b.body,"mouseover",function(a){if(g)return;var c=a.target||a.srcElement,e=c.getAttribute(d),f;if(!e||!(f=/^(.+)#(.+)$/.exec(e)))return;var i=f[1],j=f[2],k=h[i],m;if(!k||!j||j==k.currentSrcId)return;m=b.getElementById(j);if(!m)return;l(k,c,m,j)}),i(b.body,"mouseout",function(b){var c=b.relatedTarget;a(500,c)}),i(b,"keyup",function(b){if(27!==b.keyCode)return;g=!0,a(),setTimeout(function(){g=!1},200)}),j=null}function k(a,d){var e=this,f;if(a in h)return;e.group=a,h[a]=e,e.currentSrcId=null,e.pos={x:0,y:0},e.customView=!1;var g="string"==typeof d["class"]?d["class"]:"";d.view&&("string"==typeof d.view?f=b.getElementById(d.view):1===d.view.nodeType&&(f=d.view)),f?(f.style.visibility="hidden",e.customView=!0):(f=b.createElement("div"),f.className=c,g||(f.style.position="absolute"),f.style.display="none",b.body.appendChild(f)),e.customView||"pos"in d&&!d.pos?e.pos=!1:e.pos&&"[object Object]"=={}.toString.call(d.pos)&&("x"in d.pos&&(e.pos.x=d.pos.x),"y"in d.pos&&(e.pos.y=d.pos.y)),g&&(f.className+=" "+g),e.view=f,j&&j()}function l(a,b,c,d){a._timeout&&(a._timeout=clearTimeout(a._timeout)),a.currentSrcId=d,a.view.innerHTML=c.innerHTML,a.pos&&n(a,b),a.view.setAttribute(e,a.group),a.view.setAttribute(f,a.currentSrcId),a.customView?a.view.style.visibility="visible":a.view.style.display=""}function m(a,b){a.currentSrcId=null,a._timeout=setTimeout(function(){a.customView?a.view.style.visibility="hidden":a.view.style.display="none",a.view.removeAttribute(e),a.view.removeAttribute(f)},b)}function n(a,b){var c=b.getBoundingClientRect(),d={top:Math.floor(c.top),left:Math.floor(c.left)},e=o();a.view.style.top=a.pos.y+e.y+d.top+"px",a.view.style.left=a.pos.x+e.x+d.left+"px"}function o(){var c=a.pageXOffset,d=a.pageYOffset,e;return void 0===c&&(c=(((e=b.documentElement)||(e=b.body.parentNode))&&typeof e.scrollLeft=="number"?e:b.body).scrollLeft),void 0===d&&(d=(((e=b.documentElement)||(e=b.body.parentNode))&&typeof e.scrollTop=="number"?e:b.body).scrollTop),{x:c,y:d}}var a=this,b=a.document,c="html-tt",d="data-htmltt",e=d+"-group",f=d+"-src",g=!1,h={},i=function(){return"function"==typeof b.body.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)}}();return{create:function(a,b){return void (new k(a,b||{}))}}}();